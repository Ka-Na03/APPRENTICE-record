# Cookie とセッションについて説明できる

## 1. ステートレス

HTTP は特徴としてステートレスであると言われます。ステートレスとは何か、プログラミング初心者にわかるように説明してください。

- 各リクエストが独立していてるということ。
- ステートレス(stateless)は「ステータスが無い」、要するに「状態を保持しない」という事です
- ログインしたユーザーが一度ページを移動すると再度ログインが必要になるような状態がステートレス


## 2. Cookie とセッション

HTTP がステートレスであることを考えると、ログイン状態を保持することができません。しかし現実のアプリケーションではログイン状態を保持できないと大変不便です。

そこでログイン状態を保持するために Cookie とセッションが使われます。以下について説明してください。

- Cookie とセッションとはそれぞれ何か？
- Cookie とセッションの違いは？
- Cookie とセッションを利用してどのようにログイン状態を実現しているのか？

**Cookieの説明**
1. 特徴：Cookieはクライアント側に情報を保存する。
   - サーバーはCookieをクライアントに送信し、以降のリクエストでクライアントが同じCookieをサーバーに送信する事で同じ状態を保持することができる、
   - いわば引き出した要求や応答に貼られているメモみたいなもの
2. 用途：ブラウザの状態を保持する為に使用されている。
   - ウェブサイトでのユーザーの設定状態などを記憶するために使われる
3. 例：ログインページでログインする際に「ログインを記憶する」等のオプションを選択すると、サーバーはCookieをクライアントに送信し、クライアントのブラウザはそのCookieを保存する。
   - 次回以降のアクセス時にクライアントのブラウザは保存されたCookieをサーバーに送信し、ログイン情報のリクエストを省略してログインできるようになる。
4. メリット＆デメリット：
   - *メリット* ： Cookieはクライアント側に情報を保存するので、サーバーのリソースを節約できる。
   - *デメリット* ：情報がクライアントに保存されているので、セキュリティがクライアント次第になり、懸念がある。

**セッションの説明**
1. 特徴：セッションはサーバー側に情報を保存する。
   - クライアントにはセッションIDと呼ばれる一意の識別子が割り当てられて、この識別子によってサーバー上のセッションデータにアクセスできる。
2. 用途：ユーザーごとに一時的なデータを保存するために使用されます。
   - ログイン情報やショッピングカートの内容など、一連の関連する要求で利用可能な情報を保持するために使う
3. 例：ユーザーがログインすると、サーバー上にセッションが作成され、セッションIDがクライアントのクッキーやURLパラメータ等を通じて送信される。
   - その後のリクエストでは、クライアントがセッションIDを送信し、サーバーはそのIDに関連付けられたセッションデータを取得してユーザーの状態を特定している。
4. メリット＆デメリット：
   - *メリット* ： セッションはサーバー側に情報を保存するので、セキュアなデータの保管ができる
   - *デメリット* ： 一時とはいえサーバーのリソース消費が増える可能性がある

**双方の違いのまとめ**
両者は利用目的や状況に応じて使い分けられます。セッションは一時的な情報の保持やセキュアなデータの取り扱いに適しています。一方、クッキーはブラウザの状態の保持やパーソナライズされた体験の提供に適しています。

**ログイン状態の実現**
- ログイン状態の実現には以下の手順が一般的に使用されます。
  1. ユーザーがログイン情報を入力し、サーバーは認証を行います。
  2. 認証が成功した場合、サーバーはセッションを作成し、セッションIDをクライアントに送信します。
  3. クライアントはセッションIDをCookieとして保存します。
  4. クライアントが次回以降のリクエストを送信する際、Cookieに保存されたセッションIDをサーバーに送信します。
  5. サーバーはセッションIDを受け取り、対応するセッションデータを取得します。
  6. サーバーはセッションデータを使用してユーザーを識別し、ログイン状態を確認します。

## 3. Cookie の確認

ブラウザで Cookie を確認してみましょう。

`www.google.com` にログインした状態でアクセスし、Cookie を確認してください。