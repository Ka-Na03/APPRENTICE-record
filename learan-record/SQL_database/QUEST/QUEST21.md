# テーブルを定義できる

## 1. データ型
データを格納する際の性質を指定する為に使われるルールです。
データベース内にデータを保存する時の型を適切なものに指定することで、データの正確性や一貫性が維持され、効率的な処理を行う事ができます。    
データ型には大まかに５つに分類されます。
- `文字列型(String)`  
  文字列データを格納する為の型です。
  - `CHAR`型  
    固定長の文字列を格納する型です。格納する文字数を指定し、指定した文字数以下の文字を格納した場合、文字列の末尾に空白を必要なだけ付け加えて指定の長さの文字列として格納します。値を取得する時や比較する場合は末尾の空白は削除されて取得できます。  
    - メリット  
      **検索やソートのパフォーマンスが高速**。データの配置が予測可能で効率的に処理される。
    - デメリット  
      **ストレージの使用効率が低下する**。指定した文字数分の領域を占めるので、実際に使用する文字数よりも大きな領域を占める可能性があり、データベースの容量を無駄に使用する場合がある。
  - `VARCHAR`型   
    可変長の文字列を格納する型です。実際に使用される文だけの領域を占め、末尾に空白をつける事もありません。
    - メリット  
      **ストレージの効率が良い**  
      文字列の長さが頻繁に変化する場合必要に応じてサイズが可変するので効率がいい。
    - デメリット  
      非常に大量のレコードが存在する場合やデータが予想以上に長い場合はメモリ使用量が増える可能性がある。  CHAR型と比べると一部の操作ではパフォーマンスが低下する可能性がある。  
      CHAR型と比べるとデータの一貫性が保たれない。
- `数値型(Numeric)`   
  数値データを格納する為の型。
  - `INT`型   
    整数を格納する時に使う。範囲は0から4294967295。
  - `FLOAT`型   
    浮動小数点数を格納する時に使われる。
  - `DECIMAL`型   
    正確なデータを格納するので、金銭データ等の正確な精度が必要な場合に使われる。
- `日付/時刻型(DATE/TIME)`    
  日付や時刻を格納する為の型。
- `真偽型(BOOLEAN)`   
  `真偽値(TRUE/FALSE)`を格納する型
- その他のデータ型  
  バイナリデータ(BLOG/BINARY/VARBINARY)、テキストデータ(TEXT)、列挙型(ENUM)、ビットフラグ(BIT)、など特定のデータ要件に応じたデータ型

## 2. NULL
- データが存在しないか未知であることを表す値です。  
- データが欠落していたり、未設定であることを表す時に使用されます。  
- 比較演算や計算において特定のルールが適用されたり、特別な扱いを受ける値です。
- 欠損値や未知のデータに対処するための重要な概念で、適切に扱うとデータベースに柔軟性をもたらします。
- 適切に扱わないとデータの整合性やエラーが出たり等の悪影響を与える場合もあるので、データの設計や操作において慎重に取り扱う必要があります。

## 3. プライマリキー
テーブル内のレコードに同じ値をもう二つのレコードは存在しないように設定し、各レコードを識別するために使用する。  
- 一意性を持つ
- データの高速な検索や結合ができる
- 他のテーブルとの関連性を確率できる  

テーブル作成時に指定される事が一般的で、IDなど新しくデータが追加される度に一意の値が増加し、自動的に連番が割り当てられる様にできる「`AUTO_INCREMENT`」や`一意制約(UNIQUE Constraint)`を持つカラムに指定されます。 
文字列や複数のカラムと組み合わせとしても定義できます。

## 4. 初期値
テーブルに新しいレコードが追加される際に初期値として指定された値が自動的にカラムに設定される値のことです。  
- レコード追加時に明示的な値を指定しない場合に使う。
- 値が欠落している場合に使う。
- データの正規化を促進できる。
- データの整合性を保ちつつ、データの取り扱いを簡単に行う事ができるようになる。

## 5. AUTO INCREMENT
IDなど新しくデータが追加される度に一意の値が増加し、自動的に連番が割り当てられる様にできる。
- 整数値のカラムに対して使用される。
- 一意性が保たれるので、プライマリキーや一意の識別子として使用される事が一般的。

## 6. 外部キー制約
複数のテーブル間の関連性を定義し、データの整合性・一貫性・参照が保証される制約。  
親テーブルである他のテーブルのプライマリキーや一意のキーと、自身のテーブル(子テーブル)を関連付けて、データの整合性を維持し関連情報を効率的に管理できる。  
- 外部キーは、子テーブルに存在するカラムである必要があります。
- 外部キーは、親テーブルの主キーまたは一意のキーと関連付けられます。
- 外部キーの値は、親テーブルのキー値を参照しなければなりません。
- 外部キーの制約により、参照される値が存在しない場合、データの追加や更新は制限されます。
- 親テーブルのキー値が変更された場合、それに関連する子テーブルの外部キーも適切に更新されます。
- 親テーブルの特定のレコードが削除された場合、それに関連する子テーブルのレコードも適切に更新または削除されます。

## 7. ユニークキー制約
ユニークキー制約は、テーブル内の特定または複数のカラムの値が一意であることを保証する為につかわれます。  
メールアドレスやユーザー名などの重複してはいけないデータを管理する時にユニークキー制約の使用が推奨される。

- プライマリキーと同様の役割を果たすこともありますが、プライマリキーはテーブルの行を一意に識別するために使用されるのに対して、ユニークキーは単に重複を許さない値を指定するために使用されます。
- ユニークキー制約は単に値の一意性を保証するために使用されますが、識別性を持つ必要はありません。
- テーブル内に複数のユニークキー制約を設定することができます。

## 8. テーブル定義